<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Reference on Makina States</title>
    <link>/reference/index.xml</link>
    <description>Recent content in Reference on Makina States</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fr-FR</language>
    <lastBuildDate>Wed, 15 Mar 2017 23:58:39 +0100</lastBuildDate>
    <atom:link href="/reference/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Preamble</title>
      <link>/reference/preamble/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/preamble/</guid>
      <description>

&lt;h2 id=&#34;briefing&#34;&gt;Briefing&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;MakinaStates at a whole is a combination of &lt;a href=&#34;https://www.ansible.com/&#34;&gt;ansible&lt;/a&gt; and &lt;a href=&#34;https://docs.saltstack.com/en/latest/&#34;&gt;salt&lt;/a&gt; aiming at operating a cluster from baremetal to projects
delivery.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Note that makina-states &lt;b&gt;do not use regular salt daemons(minion/master) to operate remotely &lt;br/&gt;
but an ansible bridge that copy the pillar and use salt-call locally
directly on the remote box via SSH&lt;/b&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Ansible get the information from makinastates by getting the salt pillar
for a particular through a custom dynamic inventory.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;compatibility&#34;&gt;Compatibility&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;For now, you will have to use &lt;b&gt;Ubuntu &amp;gt;= 14.04&lt;/b&gt;.&lt;br/&gt;
Makina-States can be ported to any
linux based OS, but we, here, use ubuntu server and this is the only
supported system for now. &lt;br/&gt;
It can be used in any flavor: lxc, docker, baremetal, kvm, etc.&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Order of operation</title>
      <link>/reference/sumup/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/sumup/</guid>
      <description>

&lt;h2 id=&#34;organisation-workflow&#34;&gt;Organisation &amp;amp; Workflow&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;makina-states primarely use salt to deploy on the targeted environment.&lt;br&gt;&lt;/li&gt;
&lt;li&gt;Our salt states are thought to be used in a special order,&lt;br/&gt;
and specially when you call salt via the &lt;strong&gt;sls&lt;/strong&gt;: &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/top.sls&#34;&gt;&lt;code&gt;makina-states.top&lt;/code&gt;&lt;/a&gt;.

&lt;ul&gt;
&lt;li&gt;We apply first the &lt;a href=&#34;../nodetype&#34;&gt;nodetype&lt;/a&gt; configuration.&lt;/li&gt;
&lt;li&gt;Then, we will apply the &lt;a href=&#34;../controllers&#34;&gt;controllers&lt;/a&gt; configuration.&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;Then, we will apply &lt;a href=&#34;../localsettings&#34;&gt;localsettings&lt;/a&gt; states&lt;/li&gt;
&lt;li&gt;After all of the previous steps, we may configure &lt;code&gt;services&lt;/code&gt; like
sshd, crond, or databases. If we are on the &lt;strong&gt;scratch&lt;/strong&gt; mode, no
services are configured by default.&lt;/li&gt;
&lt;li&gt;Eventually, we may by able to install projects via &lt;code&gt;mc_project&lt;/code&gt;. &lt;br/&gt;
A project is just a classical code repository which has a &amp;ldquo;.salt&amp;rdquo;
and/or ansible playbooks/roles folder commited with enougth
information on how to deploy it.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;registries&#34;&gt;Registries&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;The configuration of any of the formulas (nodetypes, controllers, localsettings,
services) is handled via Makina-States &lt;a href=&#34;../registries&#34;&gt;registries&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;history&#34;&gt;History&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Makina-States was first using the salt HighState principle of configuring
everything.&lt;/li&gt;
&lt;li&gt;was based at fist on &lt;code&gt;nodetypes presets&lt;/code&gt; that were preselected collections of &lt;a href=&#34;https://docs.saltstack.com/en/latest/topics/tutorials/starting_states.html&#34;&gt;salt states&lt;/a&gt; to apply to the system&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;This is from where the &lt;a href=&#34;https://docs.saltstack.com/en/latest/ref/states/highstate.html&#34;&gt;highstate&lt;/a&gt; will start to run.&lt;/li&gt;
&lt;li&gt;Recently we cutted off this behavior, and now you must apply them explicitly.&lt;br/&gt;
Indeed:

&lt;ul&gt;
&lt;li&gt;highstate tend to grow and when you decide to reapply it you may
accidentaly deliver things you forgotten of.&lt;/li&gt;
&lt;li&gt;It&amp;rsquo;s long, very long to wait to reapply everything for small changes.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Layout</title>
      <link>/reference/layout/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/layout/</guid>
      <description>

&lt;h2 id=&#34;layout&#34;&gt;Layout&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Relative to the top &lt;code&gt;makina-states&lt;/code&gt; clone folder.&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;
 bin/ansible                    -&gt; wrapper to ansible
 bin/ansible-galaxy             -&gt; wrapper to ansible-galaxy
 bin/ansible-playbook           -&gt; wrapper to ansible-playbook
 bin/salt-call                  -&gt; wrapper to salt-call
 ansible/                       -&gt; ansible plays, roles, modules &amp; etc
 etc/                           -&gt; configuration
   etc/ansible/                 -&gt; ansible configuration
   etc/salt/                    -&gt; saltstack configuration
   etc/makina-states/           -&gt; makina-states  configuration
 pillar/                        -&gt; saltstack pillar files
     pillar/pillar.d/           -&gt; saltstack pillar files (global)
     pillar/private.pillar.d/   -&gt; saltstack pillar files
                                  (for the current node)
     pillar/&lt;$minion&gt;.pillar.d/ -&gt; saltstack pillar files
                                  (for a specific minion)
 salt/makina-states/            -&gt; saltstack states
   makina-states/               -&gt; makina-states saltstack states
   salt/_modules/               -&gt; custom salt modules
   salt/_pillar/                -&gt; custom extpillar modules
&lt;/pre&gt;

&lt;h2 id=&#34;salt-pillar&#34;&gt;Salt pillar&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Saltstack configuration is based on pillars.&lt;/li&gt;
&lt;li&gt;To facilitate configuration of the Top file, we added those features:

&lt;ul&gt;
&lt;li&gt;Any &lt;strong&gt;JSON&lt;/strong&gt; file can be used as pillar data.&lt;/li&gt;
&lt;li&gt;Any &lt;strong&gt;SLS/json&lt;/strong&gt; file dropped inside &lt;code&gt;pillar/pillars.d/&lt;/code&gt; will be loaded for all minion as pillar data&lt;/li&gt;
&lt;li&gt;Any &lt;strong&gt;SLS/json&lt;/strong&gt; file dropped inside &lt;code&gt;pillar/private.pillars.d&lt;/code&gt; will be only loaded for the current node of operation.&lt;/li&gt;
&lt;li&gt;Any &lt;strong&gt;SLS/json&lt;/strong&gt; file dropped inside &lt;code&gt;pillar/&amp;lt;$minionid&amp;gt;.pillars.d&lt;/code&gt; will be only loaded for the &amp;ldquo;\$minionid&amp;rdquo; host&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;salt-ansible-bridge-notes&#34;&gt;Salt + Ansible bridge notes&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Makina-states has better to use an &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/ansible/inventories/makinastates.py&#34;&gt;ansible dynamic inventory&lt;/a&gt;
that bridges the salt pillar with ansible via a salt module:
&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_remote_pillar.py&#34;&gt;mc_remote_plllar&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;This module is pluggable and will search in the salt modules installed
those who have declared special named functions:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;get_masterless_makinastates_hosts()&lt;/code&gt;&lt;/p&gt;

&lt;dl&gt;
&lt;dd&gt;return a list of host to manage&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;get_masterless_makinastates_groups(minionid, pillar)&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;return a list of groups for the specific minion id&lt;/dd&gt;
&lt;/dl&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;For each host found by all &lt;code&gt;get_masterless_makinastates_hosts&lt;/code&gt; functions:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Get its pillar by calling
&lt;code&gt;mc_remote_pillar.get_pillar($host)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Extract/generate from informations in the pillar relevant ansible
host vars for this minion. &lt;strong&gt;saltpillar&lt;/strong&gt; ansible hostvar is the
pillar of this minion.&lt;/li&gt;
&lt;li&gt;Generate ansible groups from those hostvars by calling eac
&lt;code&gt;get_masterless_makinastates_groups&lt;/code&gt; function&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;By default, we use the &lt;code&gt;mc_pillar&lt;/code&gt; ext pillar which loads a file:
&lt;code&gt;etc/makina-states/database.sls&lt;/code&gt; which describe our infractructure and
this will:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;list all nodes that are configured as ansible targets&lt;/li&gt;
&lt;li&gt;generate pillar info for all nodes (and per se fall inside
the ansible inventory of those related hosts.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;custom-extpillar&#34;&gt;Custom extpillar&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;In other words, to add your custom way of managing your hosts:

&lt;ul&gt;
&lt;li&gt;Create an ext_pillar to complete the pillar for a specific minion
depending on its &lt;code&gt;minion id&lt;/code&gt; and that&amp;rsquo;s why the easiest way
is to adopt a minionid/hostname naming scheme.&lt;/li&gt;
&lt;li&gt;Create a module that implement the &lt;code&gt;get_masterless_makinastates_hosts&lt;/code&gt; &amp;amp;&amp;amp; &lt;code&gt;get_masterless_makinastates_groups&lt;/code&gt; functions&lt;/li&gt;
&lt;li&gt;register the pillar and module to the local makina-states installation (see bellow)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Take example on:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_pillar.py&#34;&gt;module&lt;/a&gt; : (search for &lt;code&gt;get_masterless_makinastates_groups&lt;/code&gt; &amp;amp;&amp;amp; &lt;code&gt;get_masterless_makinastates_hosts&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/pillar/mc_pillar.py&#34;&gt;extpillar&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;To load your extpillar, you ll have to add it to the local salt configuration. &lt;br/&gt;
You can add a file this way&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;$WC/etc/salt/minion.d/99_extpillar.conf&lt;/span&gt; 
    &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;ext_pillar&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;p p-Indicator&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;mc_pillar&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p p-Indicator&#34;&gt;{}&lt;/span&gt;
        &lt;span class=&#34;p p-Indicator&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;mc_pillar_jsons&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p p-Indicator&#34;&gt;{}&lt;/span&gt;
        &lt;span class=&#34;p p-Indicator&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;mycustompillar&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p p-Indicator&#34;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;To load your custom module, place it under &lt;code&gt;$WC/salt/_modules&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;To load your custom pillar, place it under &lt;code&gt;$WC/salt/_pillar&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;verify-the-pillar-for-a-minion&#34;&gt;Verify the pillar for a minion&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Use this command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;bin/salt-call mc_remote_pillar.get_pillar &amp;lt;minion_id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;verify-the-groups-for-a-minion&#34;&gt;Verify the groups for a minion&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Use this command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;bin/salt-call mc_remote_pillar.get_groups &amp;lt;minion_id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;optional-add-a-cron-to-speed-up-pillar-generation&#34;&gt;(OPTIONAL) Add a cron to speed up pillar generation&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;To generate regularly the cron for all the configured minion, to speed
up regular ansible calls (the pillar will already be cached at the call
time), you can register a cron that does that.&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;/etc/cron.d/refresh_ansible&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;
15,30,45,00 * * * * root /srv/makina-states/_scripts/refresh_makinastates_pillar.sh
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>database.sls</title>
      <link>/reference/databasesls/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/databasesls/</guid>
      <description>

&lt;ul&gt;
&lt;li&gt;For configuring a single machine, you can rely on a local crafted pillar,
but to operate on a cluster, it would be a lot more cumbersome and not &lt;strong&gt;DRY&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Fir this we created &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_pillar.py&#34;&gt;&lt;code&gt;mc_pillar&lt;/code&gt;&lt;/a&gt;, an ext_pillar that describe a whole
cluster infrastructure from a single &lt;strong&gt;SLS&lt;/strong&gt; file.&lt;/li&gt;
&lt;li&gt;This special file, &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/etc/makina-states/database.sls.in&#34;&gt;&lt;code&gt;etc/makina-states/database.sls&lt;/code&gt;&lt;/a&gt;. will
describe our infrastructure and specially how to access to the remote
systems.&lt;/li&gt;

&lt;li&gt;&lt;p&gt;At first, you will need to copy &lt;code&gt;etc/makina-states/database.sls.in&lt;/code&gt; which is a sample, and adapt it to your needs:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;cp etc/makina-states/database.sls.in &lt;span class=&#34;se&#34;&gt;\&lt;/span&gt;
      etc/makina-states/database.sls
&lt;span class=&#34;nv&#34;&gt;$EDITOR&lt;/span&gt; etc/makina-states/database.sls
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;The contents of the file is mostly self explainatory.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;This file is then parsed by the &lt;strong&gt;mc_pillar module&lt;/strong&gt; (called via an
extpillar hook) to get the appropriate pillar for a specific minion id.
This pillar aims to grab a good part of its system configuration from backups to
ssl, to cloud configuration and so on.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;We heavyly rely on memcached to improve the performance, so first please
install it this way:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;bin/salt-call -lall state.sls makina-states.services.cache.memcached
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;verify-the-pillar-for-a-minion-after-a-database-sls-change&#34;&gt;Verify the pillar for a minion after a database.sls change&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Use this command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;service memcached restart
bin/salt-call mc_pillar.ext_pillar &amp;lt;minion_id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Registries &amp; Configuration</title>
      <link>/reference/registries/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/registries/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;We needed a way, in our &lt;strong&gt;salt&lt;/strong&gt; states:

&lt;ul&gt;
&lt;li&gt;To deduplicate the cumbersome handling of variables&lt;/li&gt;
&lt;li&gt;To make cleaner jinja code&lt;/li&gt;
&lt;li&gt;For a configuration knob, aggregate values from difference sources, by precedence.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;For this, we decided to abstract this in python code&lt;/li&gt;

&lt;li&gt;&lt;p&gt;So, a &lt;strong&gt;registry&lt;/strong&gt; in the Makina-States vocabulary is a
&lt;a href=&#34;https://docs.saltstack.com/en/latest/ref/modules/&#34;&gt;salt execution module&lt;/a&gt; that returns a python dictionnary:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;containing various configuration knobs&lt;/li&gt;
&lt;li&gt;with &lt;strong&gt;sane defaults&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;overridable at will by the user via the &lt;strong&gt;pillar&lt;/strong&gt; or the &lt;strong&gt;grains&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;The idea was then to use dedicated saltstack execution modules to provide
a way to have dictionnaries of data aggregated with this precedence:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Pillar (&lt;strong&gt;&lt;strong&gt;pillar&lt;/strong&gt;&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Grains (&lt;strong&gt;&lt;strong&gt;grains&lt;/strong&gt;&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Configuration of the minion (&lt;strong&gt;&lt;strong&gt;opts&lt;/strong&gt;&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Configuration of the minion (&lt;strong&gt;&lt;strong&gt;opts&lt;/strong&gt;[&amp;lsquo;master]&amp;rsquo;]&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Exemples:

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_apache.py&#34;&gt;mc_apache&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_nginx.py&#34;&gt;mc_nginx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_mysql.py&#34;&gt;mc_mysql&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Those registries rely on an heavily used function &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_utils.py#L681&#34;&gt;&lt;code&gt;mc_utils.default&lt;/code&gt;&lt;/a&gt; that will do the job of gathering for the &lt;code&gt;configuration prefix&lt;/code&gt; all the knobs
from the various pieces of data we want (pillar, grains, opts)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Thus, by example, you want to install the mysql service:&lt;br&gt;
You will use this sls:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;  bin/salt-call -linfo --retcode-passthrough &lt;span class=&#34;se&#34;&gt;\&lt;/span&gt;
    state.sls makina-states.servies.db.mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Reading the code of &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/db/mysql/configuration.sls#L11&#34;&gt;mysql formula&lt;/a&gt;, you see that it calls &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_mysql.py#L157&#34;&gt;mc_mysql&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;To override the &lt;code&gt;port&lt;/code&gt; (default: 3306), you can do this in the pillar
or the grains those ways&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Flat Method(preferred): &lt;strong&gt;pillar/pillar.d/mysql.sls&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span&gt;&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;makina-states.services.db.mysql.port&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;3306&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;Nested Method: &lt;strong&gt;pillar/pillar.d/mysql.sls&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span&gt;&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;makina-states.services.db.mysql&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p p-Indicator&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;l l-Scalar l-Scalar-Plain&#34;&gt;3306&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Nodetypes</title>
      <link>/reference/nodetypes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/nodetypes/</guid>
      <description>

&lt;h2 id=&#34;nodetypes&#34;&gt;Nodetypes&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Your choice for &lt;code&gt;nodetype&lt;/code&gt; is one of:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;scratch (default)&lt;/strong&gt;
 :   only manage the ansible/salt installation and
     configuration. You ll want to activate this mode if you want
     to apply explicitly your states without relying of default
     nodetypes configuration.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;server&lt;/strong&gt;
 :   matches a baremetal server, and manage it
     from end to end (base packages, network, locales, sshd, crond,
     logrotate, etc, by default)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;vm&lt;/strong&gt;
 :   VM (not baremetal), this is mostly like &lt;strong&gt;server&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;lxccontainer&lt;/strong&gt;
 :   matches a lxc container mostly like &lt;strong&gt;server&lt;/strong&gt;
     but install and fix lxc boot scripts&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;laptop&lt;/strong&gt;
 :   mostly like &lt;strong&gt;server&lt;/strong&gt; but also install packages for
     working on a developement machine (prebacking a laptop for
     a dev&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;dockercontainer&lt;/strong&gt;
 :   matches a VM (not baremetal), this is
     mostly like &lt;strong&gt;server&lt;/strong&gt;, but install &amp;amp; preconfigure circus to
     manage daemons.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;devhost&lt;/strong&gt;
 :   development machine enabling
     states to act on that, by example installation of a test
     local-loop mailer.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;vagrantvm&lt;/strong&gt;
 :    flag vagrant boxes and is a subtype of devhost&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;You can tell &lt;code&gt;boot-salt2.sh&lt;/code&gt; which nodetype to use via the &lt;code&gt;--nodetype&lt;/code&gt; switch&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;boot-salt2.sh --nodetype server --reconfigure
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;switching-to-another-nodetype-on-an-already-installed-environment&#34;&gt;Switching to another nodetype on an already installed environment&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;If you installed the &lt;strong&gt;scratch&lt;/strong&gt; preset and want to switch to another preset:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;salt-call state.sls makina-states.nodetypes.&amp;lt;your_new_preset&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;If you installed a preset and want to switch to another preset:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;edit &lt;code&gt;etc/makina-states/nodetype&lt;/code&gt; and put your new preset&lt;/li&gt;
&lt;li&gt;edit &lt;code&gt;etc/makina-states/nodetypes.yaml&lt;/code&gt; and set to false your old preset&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Finally, run:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;salt-call state.sls makina-states.nodetypes.&amp;lt;your_new_preset&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;And finally:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span&gt;&lt;/span&gt;boot-salt2.sh --nodetype &amp;lt;your_new_preset&amp;gt; --reconfigure
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Controllers</title>
      <link>/reference/controllers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/controllers/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;controllers states purpose is mainly to check:

&lt;ul&gt;
&lt;li&gt;our bundled salt &amp;amp; ansible binaries are ready for operation&lt;/li&gt;
&lt;li&gt;the cloned code is up to date and clean&lt;/li&gt;
&lt;li&gt;If the user selected them:

&lt;ul&gt;
&lt;li&gt;crons are in place&lt;/li&gt;
&lt;li&gt;install links (&lt;code&gt;/usr/local/bin&lt;/code&gt;) are present&lt;/li&gt;
&lt;li&gt;RollingRealse updater crons are in place&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>LocalSettings</title>
      <link>/reference/localsettings/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/localsettings/</guid>
      <description>

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;LocalSettings states are related to the low level configuration of an environment&lt;br/&gt;
EG:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;locales&lt;/li&gt;
&lt;li&gt;network&lt;/li&gt;
&lt;li&gt;low level configuration](hardrive, etc)&lt;/li&gt;
&lt;li&gt;installing compilers &amp;amp; language interpreters&lt;/li&gt;
&lt;li&gt;configuring base tools &amp;amp; editors&lt;/li&gt;
&lt;li&gt;configuring SSH client&lt;/li&gt;
&lt;li&gt;distributing SSL certificates&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;If any other preset than &lt;code&gt;scratch&lt;/code&gt; has been activated, &lt;br/&gt;
Many localsettings will be applied by default, see &lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/mc_states/modules/mc_localsettings.py#L113&#34;&gt;mc_localsettings:registry&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;states&#34;&gt;States&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings&#34;&gt;localsettings States&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;non exhaustive shortcuts:&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/apparmor&#34;&gt;localsettings/apparmor&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/nodejs&#34;&gt;localsettings/nodejs&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/hostname&#34;&gt;localsettings/hostname&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/sudo&#34;&gt;localsettings/sudo&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/autoupgrade&#34;&gt;localsettings/autoupgrade&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/npm&#34;&gt;localsettings/npm&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/hosts&#34;&gt;localsettings/hosts&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/sysctl&#34;&gt;localsettings/sysctl&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/casperjs&#34;&gt;localsettings/casperjs&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/nscd&#34;&gt;localsettings/nscd&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/init.sls&#34;&gt;localsettings/init.sls&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/systemd&#34;&gt;localsettings/systemd&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/check_raid&#34;&gt;localsettings/check_raid&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/phantomjs&#34;&gt;localsettings/phantomjs&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/insserv&#34;&gt;localsettings/insserv&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/timezone&#34;&gt;localsettings/timezone&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/desktoptools&#34;&gt;localsettings/desktoptools&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/pkgs&#34;&gt;localsettings/pkgs&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/jdk&#34;&gt;localsettings/jdk&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/updatedb&#34;&gt;localsettings/updatedb&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/dns&#34;&gt;localsettings/dns&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/python&#34;&gt;localsettings/python&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/ldap&#34;&gt;localsettings/ldap&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/users&#34;&gt;localsettings/users&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/editor&#34;&gt;localsettings/editor&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/reconfigure-network&#34;&gt;localsettings/reconfigure-network&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/locales&#34;&gt;localsettings/locales&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/vim&#34;&gt;localsettings/vim&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/env&#34;&gt;localsettings/env&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/repository_dotdeb&#34;&gt;localsettings/repository_dotdeb&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/localrc&#34;&gt;localsettings/localrc&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/mvn&#34;&gt;localsettings/mvn&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/etckeeper&#34;&gt;localsettings/etckeeper&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/rvm&#34;&gt;localsettings/rvm&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/grub&#34;&gt;localsettings/grub&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/ssl&#34;&gt;localsettings/ssl&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/git&#34;&gt;localsettings/git&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/screen&#34;&gt;localsettings/screen&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/golang&#34;&gt;localsettings/golang&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/shell&#34;&gt;localsettings/shell&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/groups&#34;&gt;localsettings/groups&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/localsettings/sshkeys&#34;&gt;localsettings/sshkeys&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
    </item>
    
    <item>
      <title>Services</title>
      <link>/reference/services/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/services/</guid>
      <description>

&lt;ul&gt;
&lt;li&gt;Salt States dedicated to install services on the targeted environment&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;states&#34;&gt;States&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services&#34;&gt;services States&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;non exhaustive shortcuts:&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;backup&#34;&gt;backup&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/backup/bacula&#34;&gt;services/backup/bacula&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/backup/dbsmartbackup&#34;&gt;services/backup/dbsmartbackup&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/backup/burp&#34;&gt;services/backup/burp&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/backup/rdiff-backup&#34;&gt;services/backup/rdiff-backup&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;base&#34;&gt;base&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/base/cron&#34;&gt;services/base/cron&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/base/ntp&#34;&gt;services/base/ntp&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/base/dbus&#34;&gt;services/base/dbus&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/base/ssh&#34;&gt;services/base/ssh&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/cache/memcached&#34;&gt;services/cache/memcached&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;misc&#34;&gt;misc&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/collab/etherpad&#34;&gt;services/collab/etherpad&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/queue/rabbitmq&#34;&gt;services/queue/rabbitmq&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/sound/mumble&#34;&gt;services/sound/mumble&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/ftp/pureftpd&#34;&gt;services/ftp/pureftpd&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;db&#34;&gt;db&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/db/mongodb&#34;&gt;services/db/mongodb&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/db/postgresql&#34;&gt;services/db/postgresql&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/db/mysql&#34;&gt;services/db/mysql&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/db/redis&#34;&gt;services/db/redis&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;dns&#34;&gt;dns&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/dns/dhcpd&#34;&gt;services/dns/dhcpd&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/dns/slapd&#34;&gt;services/dns/slapd&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/dns/bind&#34;&gt;services/dns/bind&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;firewall&#34;&gt;firewall&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/firewall/shorewall&#34;&gt;services/firewall/shorewall&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/firewall/firewalld&#34;&gt;services/firewall/firewalld&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/firewall/firewall&#34;&gt;services/firewall/firewall&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/firewall/ms_iptables&#34;&gt;services/firewall/ms_iptables&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/firewall/fail2ban&#34;&gt;services/firewall/fail2ban&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/firewall/psad&#34;&gt;services/firewall/psad&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;gis&#34;&gt;gis&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/gis/postgis&#34;&gt;services/gis/postgis&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/gis/ubuntugis&#34;&gt;services/gis/ubuntugis&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;http&#34;&gt;http&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/http/nginx&#34;&gt;services/http/nginx&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/http/apache_modfastcgi&#34;&gt;services/http/apache_modfastcgi&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/http/apache&#34;&gt;services/http/apache&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/http/apache_modfcgid&#34;&gt;services/http/apache_modfcgid&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/java/tomcat&#34;&gt;services/java/tomcat&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/http/apache_modproxy&#34;&gt;services/http/apache_modproxy&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;log&#34;&gt;log&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/log/rsyslog&#34;&gt;services/log/rsyslog&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/log/ulogd&#34;&gt;services/log/ulogd&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;mail&#34;&gt;Mail&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/mail/dovecot&#34;&gt;services/mail/dovecot&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/mail/postfix&#34;&gt;services/mail/postfix&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;monitoring&#34;&gt;Monitoring&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/client&#34;&gt;services/monitoring/client&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/icinga_web2&#34;&gt;services/monitoring/icinga_web2&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/icinga&#34;&gt;services/monitoring/icinga&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/nagvis&#34;&gt;services/monitoring/nagvis&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/icinga2&#34;&gt;services/monitoring/icinga2&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/pnp4nagios&#34;&gt;services/monitoring/pnp4nagios&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/icinga_web&#34;&gt;services/monitoring/icinga_web&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/monitoring/snmpd&#34;&gt;services/monitoring/snmpd&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;php&#34;&gt;php&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/php/common&#34;&gt;services/php/common&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/php/modphp&#34;&gt;services/php/modphp&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/php/phpfpm&#34;&gt;services/php/phpfpm&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/php/phpfpm_with_apache&#34;&gt;services/php/phpfpm_with_apache&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/php/phpfpm_with_nginx&#34;&gt;services/php/phpfpm_with_nginx&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;proxy&#34;&gt;Proxy&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/proxy/haproxy&#34;&gt;services/proxy/haproxy&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/proxy/uwsgi&#34;&gt;services/proxy/uwsgi&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;virt&#34;&gt;virt&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/virt/docker&#34;&gt;services/virt/docker&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/virt/kvm&#34;&gt;services/virt/kvm&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/virt/lxc&#34;&gt;services/virt/lxc&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/virt/virtualbox&#34;&gt;services/virt/virtualbox&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
    </item>
    
    <item>
      <title>Services Managers</title>
      <link>/reference/servicesmanagers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/servicesmanagers/</guid>
      <description>

&lt;ul&gt;
&lt;li&gt;In makina-states services managers act on top of services to manage
their lifecycle (start/stop/restart/reload).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;systemd&#34;&gt;systemd&lt;/h2&gt;

&lt;h2 id=&#34;circus&#34;&gt;circus&lt;/h2&gt;

&lt;h2 id=&#34;supervisor&#34;&gt;supervisor&lt;/h2&gt;
</description>
    </item>
    
    <item>
      <title>Macros</title>
      <link>/reference/macros/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/macros/</guid>
      <description>

&lt;p&gt;Here are a non exhaustive list of macros that makina-states provides and you
may use in your states.&lt;/p&gt;

&lt;h2 id=&#34;helpers&#34;&gt;Helpers&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/_macros/h.jinja&#34;&gt;h(helpers)&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;deliver_deliver_config_files&lt;/strong&gt;: push  configuration files&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;service_restart_reload&lt;/strong&gt;: aim to restart or reload service
but handle the case where services mis implement the status
function and mess salt modules.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;toggle_service&lt;/strong&gt;: helper to call &lt;strong&gt;service_restart_reload&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;nginx&#34;&gt;nginx&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/http/nginx/macros.sls&#34;&gt;nginx&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/http/nginx/macros.sls#L31&#34;&gt;nginx.vhost&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;apache&#34;&gt;apache&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/http/apache/macros.sls&#34;&gt;apache&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/http/apache/macros.sls#L48&#34;&gt;apache.vhost&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;php&#34;&gt;php&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/php/macros.sls&#34;&gt;php&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/php/macros.sls#L60&#34;&gt;php.fpm_pool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/php/macros.sls#L135&#34;&gt;php.minimal_index&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/php/macros.sls#L153&#34;&gt;php.toggle_ext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;mysql&#34;&gt;mysql&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/db/mysql/init.sls&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;mysql_db&lt;/li&gt;
&lt;li&gt;mysql_group&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;postgresql&#34;&gt;postgresql&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/db/postgresql/init.sls&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;postgresql_db&lt;/li&gt;
&lt;li&gt;postgresql_user&lt;/li&gt;
&lt;li&gt;postgresql_group&lt;/li&gt;
&lt;li&gt;install_pg_exts&lt;/li&gt;
&lt;li&gt;install_pg_ext&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;circusd&#34;&gt;circusd&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services_managers/circus/macros.jinja&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;circusAddWatcher&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;supervisord&#34;&gt;supervisord&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services_managers/supervisor/macros.jinja&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;supervisorAddProgram&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;mongodb&#34;&gt;mongodb&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/db/mongodb/macros.sls&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;mongodb_db&lt;/li&gt;
&lt;li&gt;mongodb_user&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;uwsgi&#34;&gt;uwsgi&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/tree/v2/salt/makina-states/services/proxy/uwsgi&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;config&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;rabbitmq&#34;&gt;rabbitmq&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/makina-states/blob/v2/salt/makina-states/services/queue/rabbitmq/macros.sls&#34;&gt;macros&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;rabbitmq_vhost&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Projects</title>
      <link>/reference/projects/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/projects/</guid>
      <description>

&lt;h2 id=&#34;list-of-templates-for-inspiration&#34;&gt;List of templates for inspiration&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;../templates&#34;&gt;Templates&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Templates</title>
      <link>/reference/templates/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/reference/templates/</guid>
      <description>

&lt;p&gt;Those projects can be used as-is or as a kickstarter for your own projects
based on makina-states either by copying or inspiring yourself to create your own&lt;/p&gt;

&lt;h1 id=&#34;project-skeletons-compliant-with-makina-states&#34;&gt;Project skeletons compliant with makina-states&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-drupal&#34;&gt;corpus-drupal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-php&#34;&gt;corpus-php&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-django&#34;&gt;corpus-django&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-zope-plone&#34;&gt;corpus-zope-plone&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-staticwww&#34;&gt;corpus-staticwww&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;databases&#34;&gt;databases&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-solr&#34;&gt;corpus-solr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-mysql&#34;&gt;corpus-mysql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-elasticsearch&#34;&gt;corpus-elasticsearch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-mongodb&#34;&gt;corpus-mongodb&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-rabbitmq&#34;&gt;corpus-rabbitmq&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-pgsql&#34;&gt;corpus-pgsql&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;webapps&#34;&gt;webapps&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-seafile&#34;&gt;corpus-seafile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-redmine&#34;&gt;corpus-redmine&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-vaultier&#34;&gt;corpus-vaultier&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-fusiondirectory&#34;&gt;corpus-fusiondirectory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-sabnzbd&#34;&gt;corpus-sabnzbd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-legacyenketo&#34;&gt;corpus-legacyenketo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-odoo&#34;&gt;corpus-odoo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-piwik&#34;&gt;corpus-piwik&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;osm&#34;&gt;Osm&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-osmdb&#34;&gt;corpus-osmdb&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-osmrender&#34;&gt;corpus-osmrender&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-tilemill&#34;&gt;corpus-tilemill&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;code-ci&#34;&gt;Code &amp;amp; CI&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-gitlab&#34;&gt;corpus-gitlab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-jenkins&#34;&gt;corpus-jenkins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-jenkins-slave&#34;&gt;corpus-jenkins-slave&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-svn&#34;&gt;corpus-svn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-gitlabrunner&#34;&gt;corpus-gitlabrunner&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;misc&#34;&gt;Misc&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-mumble&#34;&gt;corpus-mumble&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-irssi&#34;&gt;corpus-irssi&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;mail&#34;&gt;Mail&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/makinacorpus/corpus-mailman3&#34;&gt;corpus-mailman3&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>