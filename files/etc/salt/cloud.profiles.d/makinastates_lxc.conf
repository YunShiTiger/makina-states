{% for host in containers %}
{% for id, data in lxc_cloud_profiles.items() %}
ms-{{host}}-{{id}}-lxc:
  provider: {{host}}-lxc
  from_container: ubuntu
  backing: lvm
  sudo: True
  size: {{data.size}}
  script_args: -C --from-salt-cloud
  script: {{data.msr}}/_scripts/boot-salt.sh
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-dir:
  provider: {{host}}-lxc
  from_container: ubuntu
  backing: dir
  sudo: True
  size: {{data.size}}
  script: {{data.msr}}/_scripts/boot-salt.sh
  script_args: -C --from-salt-cloud
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-lvm-sratch:
  provider: {{host}}-lxc
  backing: lvm
  sudo: True
  size: {{data.size}}
  script: {{data.msr}}/_scripts/boot-salt.sh
  script_args: -C --from-salt-cloud
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-dir-scratch:
  provider: {{host}}-lxc
  backing: dir
  sudo: True
  size: {{data.size}}
  script: {{data.msr}}/_scripts/boot-salt.sh
  script_args: -C --from-salt-cloud
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-mastersalt-lxc:
  provider: {{host}}-lxc
  from_container: ubuntu
  backing: lvm
  sudo: True
  size: {{data.size}}
  script_args: -C --from-salt-cloud --mastersalt-minion
  script: {{data.msr}}/_scripts/boot-salt.sh
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-mastersalt-dir:
  provider: {{host}}-lxc
  from_container: ubuntu
  backing: dir
  sudo: True
  size: {{data.size}}
  script: {{data.msr}}/_scripts/boot-salt.sh
  script_args: -C --from-salt-cloud --mastersalt-minion
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-mastersalt-lvm-sratch:
  provider: {{host}}-lxc
  backing: lvm
  sudo: True
  size: {{data.size}}
  script: {{data.msr}}/_scripts/boot-salt.sh
  script_args: -C --from-salt-cloud --mastersalt-minion
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}

ms-{{host}}-{{id}}-mastersalt-dir-scratch:
  provider: {{host}}-lxc
  backing: dir
  sudo: True
  size: {{data.size}}
  script: {{data.msr}}/_scripts/boot-salt.sh
  script_args: -C --from-salt-cloud --mastersalt-minion
  minion:
    master: {{data.master}}
    master_port: {{data.master_port}}
{% endfor %}
{% endfor %}
# vim:set ft=sls:
