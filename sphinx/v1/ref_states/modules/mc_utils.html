

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mc_utils / Some usefull small tools &mdash; Makina States 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Makina States 1.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Execution modules" href="index.html"/>
        <link rel="next" title="States modules" href="../states/index.html"/>
        <link rel="prev" title="mc_macros / macros helpers" href="mc_macros.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../../index.html" class="fa fa-home"> Makina States</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Makina-states V1 documentation (OBSOLETE)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../index.html#usage">Usage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#reference">Reference</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Makina States</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Makina-states V1 documentation (OBSOLETE)</a> &raquo;</li>
      
          <li><a href="../../ref_index.html">Reference</a> &raquo;</li>
      
          <li><a href="../index.html">Custom states modules</a> &raquo;</li>
      
          <li><a href="index.html">Execution modules</a> &raquo;</li>
      
    <li>mc_utils / Some usefull small tools</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../../_sources/v1/ref_states/modules/mc_utils.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <span class="target" id="module-mc_states.modules.mc_utils"></span><div class="section" id="mc-utils-some-usefull-small-tools">
<span id="module-mc-utils"></span><h1>mc_utils / Some usefull small tools<a class="headerlink" href="#mc-utils-some-usefull-small-tools" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="mc_states.modules.mc_utils.assert_good_grains">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">assert_good_grains</code><span class="sig-paren">(</span><em>grains</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.assert_good_grains" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8216;
no time to search/debug why,
but sometimes grains dict is empty depending on the call context
grains loading bug retriggered (i fixed once, do not remember where, FU SALT ...</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.cache_check">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">cache_check</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.cache_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">invalidate_memoize_cache()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.copy_dictupdate">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">copy_dictupdate</code><span class="sig-paren">(</span><em>dict1</em>, <em>dict2</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.copy_dictupdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to dictupdate but with deepcopy of two
merged dicts first.</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.cyaml_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">cyaml_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.cyaml_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.cyaml_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.cyaml_load">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">cyaml_load</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.cyaml_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.cyaml_load()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.defaults">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">defaults</code><span class="sig-paren">(</span><em>prefix</em>, <em>datadict</em>, <em>ignored_keys=None</em>, <em>overridden=None</em>, <em>noresolve=False</em>, <em>firstcall=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Magic defaults settings configuration getter</p>
<ul class="simple">
<li>Get the &#8220;prefix&#8221; value from the configuration (pillar/grain)</li>
<li>Then overrides or append to it with the corresponding
key in the given &#8220;datadict&#8221; if value is a dict or a list.<ul>
<li>If we get from pillar/grains/local from the curent key in the form:
&#8220;{prefix}-overrides: it overrides totally the original value.</li>
<li>if the datadict contains a key &#8220;{prefix}-append and
the value is a list, it appends to the original value</li>
</ul>
</li>
<li><dl class="first docutils">
<dt>If the datadict contains a key &#8220;{prefix}&#8221;:</dt>
<dd><ul class="first last">
<li>If a list: override to the list the default list in conf</li>
<li>Elif a dict: update the default dictionnary with the one in conf</li>
<li>Else take that as a value if the value is not a mapping or a list</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.dictupdate">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">dictupdate</code><span class="sig-paren">(</span><em>dict1</em>, <em>dict2</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.dictupdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge two dictionnaries recursively</p>
<p>test:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>salt &#39;*&#39; mc_utils.dictupdate &#39;{foobar:
            {toto: tata, toto2: tata2},titi: tutu}&#39;
            &#39;{bar: toto, foobar: {toto2: arg, toto3: arg2}}&#39;
----------
bar:
    toto
foobar:
    ----------
    toto:
        tata
    toto2:
        arg
    toto3:
        arg2
titi:
    tutu
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.epdb">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">epdb</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.epdb" title="Permalink to this definition">¶</a></dt>
<dd><p>add a network attachable breakpoint</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.file_read">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">file_read</code><span class="sig-paren">(</span><em>fic</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.file_read" title="Permalink to this definition">¶</a></dt>
<dd><p>read the content a file</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.format_resolve">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">format_resolve</code><span class="sig-paren">(</span><em>value</em>, <em>original_dict=None</em>, <em>this_call=0</em>, <em>topdb=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.format_resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve a dict of formatted strings, mappings &amp; list to a valued dict
Please also read the associated test:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{&quot;a&quot;: [&quot;{b}&quot;, &quot;{c}&quot;, &quot;{e}&quot;],
 &quot;b&quot;: 1,
 &quot;c&quot;: &quot;{d}&quot;,
 &quot;d&quot;: &quot;{b}&quot;,
 &quot;e&quot;: &quot;{d}&quot;,
}

====&gt;
{&quot;a&quot;: [&quot;1&quot;, &quot;1&quot;, &quot;{e}&quot;],
 &quot;b&quot;: 1,
 &quot;c&quot;: &quot;{d}&quot;,
 &quot;d&quot;: &quot;{b}&quot;,
 &quot;e&quot;: &quot;{d}&quot;,
}
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.generate_stored_password">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">generate_stored_password</code><span class="sig-paren">(</span><em>key</em>, <em>length=None</em>, <em>force=False</em>, <em>value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.generate_stored_password" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate and store a password.
At soon as one is stored with a specific key, it will never be renegerated
unless you set force to true.</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.get">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=''</em>, <em>local_registry=None</em>, <em>registry_format='pack'</em>, <em>delimiter=&lt;class 'DEFAULT_TARGET_DELIM'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as &#8216;config.get&#8217; but with different retrieval order.</p>
<p>This routine traverses these data stores in this order:</p>
<blockquote>
<div><ul class="simple">
<li>Local minion config (opts)</li>
<li>Minion&#8217;s pillar</li>
<li><dl class="first docutils">
<dt>Dict:</dt>
<dd><ul class="first last">
<li>passed in local_registry argument</li>
<li>or automaticly loaded global registries</li>
</ul>
</dd>
</dl>
</li>
<li>Minion&#8217;s grains</li>
<li>Master config</li>
</ul>
</div></blockquote>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>salt <span class="s1">&#39;*&#39;</span> mc_utils.get pkg:apache
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.get_container">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">get_container</code><span class="sig-paren">(</span><em>pid</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.get_container" title="Permalink to this definition">¶</a></dt>
<dd><p>On a main host context, for a non containerized process
this return MAIN_HOST</p>
<p>On a container context, this return MAIN_HOST
On a hpot context, this return MAIN_HOST</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.get_local_cache">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">get_local_cache</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.get_local_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">get_local_cache()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.get_mc_server">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">get_mc_server</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.get_mc_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">get_local_cache()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.get_uniq_keys_for">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">get_uniq_keys_for</code><span class="sig-paren">(</span><em>prefix</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.get_uniq_keys_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Return keys for prefix:</p>
<blockquote>
<div><ul class="simple">
<li>if prefix is in conf</li>
<li>All other keys of depth + 1</li>
</ul>
</div></blockquote>
<p>With makina.foo prefix:</p>
<blockquote>
<div><ul class="simple">
<li>returns makina.foo</li>
<li>returns makina.foo.1</li>
<li>dont returns makina.foo.1.1</li>
<li>dont returns makina</li>
<li>dont returns makina.other</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.hash">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">hash</code><span class="sig-paren">(</span><em>string</em>, <em>typ='md5'</em>, <em>func='hexdigest'</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the hash of a string
CLI Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>salt-call --local mc_utils.hash foo
salt-call --local mc_utils.hash foo md5
salt-call --local mc_utils.hash foo sha1
salt-call --local mc_utils.hash foo sha224
salt-call --local mc_utils.hash foo sha256
salt-call --local mc_utils.hash foo sha384
salt-call --local mc_utils.hash foo sha512
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.invalidate_memoize_cache">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">invalidate_memoize_cache</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.invalidate_memoize_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">invalidate_memoize_cache()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_bool">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_bool</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a bool</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_complex">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_complex</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_complex" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a complex</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_dict">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_dict</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a dict</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_float">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_float</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_float" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a float</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_int">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_int</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_int" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value an int</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_list">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_list</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_list" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a list</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_long">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_long</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_long" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a long</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_number">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_number</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_number" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a number</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_set">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_set</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_set" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a set</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_str">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_str</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_str" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a stirng</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_a_tuple">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_a_tuple</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_a_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value a tuple</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.is_iter">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">is_iter</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.is_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>is the value iterable (list, set, dict tuple)</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.iyaml_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">iyaml_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.iyaml_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.iyaml_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.json_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">json_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.json_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.old_json_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.json_load">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">json_load</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.json_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.json_load()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.list_cache_keys">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">list_cache_keys</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.list_cache_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">list_cache_keys()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.local_minion_id">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">local_minion_id</code><span class="sig-paren">(</span><em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.local_minion_id" title="Permalink to this definition">¶</a></dt>
<dd><p>search in running config root
then in well known config salt root
then use regular salt function</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.magicstring">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">magicstring</code><span class="sig-paren">(</span><em>thestr</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.magicstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert any string to UTF-8 ENCODED one</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.manage_file">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">manage_file</code><span class="sig-paren">(</span><em>name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.manage_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Easier wrapper to file.manage_file</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.memoize_cache">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">memoize_cache</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.memoize_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">memoize_cache()</span></code> to set __opts__</p>
<p>CLI Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>salt-call -lall mc_pillar.memoize_cache test.ping
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.msgpack_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">msgpack_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.msgpack_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.old_msgpack_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.msgpack_load">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">msgpack_load</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.msgpack_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.msgpack_load()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.msr">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">msr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.msr" title="Permalink to this definition">¶</a></dt>
<dd><p>get salt root from either pillar or opts (minion or master)</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.nyaml_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">nyaml_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.nyaml_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.yaml_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.old_yaml_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">old_yaml_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.old_yaml_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.old_yaml_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.output">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">output</code><span class="sig-paren">(</span><em>mapping</em>, <em>raw=False</em>, <em>outputter='highstate'</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.output" title="Permalink to this definition">¶</a></dt>
<dd><p>This return a formatted output</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.pdb">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">pdb</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.pdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a breakpoint</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.purge_memoize_cache">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">purge_memoize_cache</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.purge_memoize_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">invalidate_memoize_cache()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.register_memcache_first">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">register_memcache_first</code><span class="sig-paren">(</span><em>pattern</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.register_memcache_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">invalidate_memoize_cache()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.remove_cache_entry">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">remove_cache_entry</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.remove_cache_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">remove_cache_entry()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.remove_entry">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">remove_entry</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.remove_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="xref py py-meth docutils literal"><span class="pre">remove_cache_entry()</span></code> to set __opts__</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.salt_root">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">salt_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.salt_root" title="Permalink to this definition">¶</a></dt>
<dd><p>get salt root from either pillar or opts (minion or master)</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.test_cache">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">test_cache</code><span class="sig-paren">(</span><em>ttl=120</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.test_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>.</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.traverse_dict">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">traverse_dict</code><span class="sig-paren">(</span><em>data</em>, <em>key</em>, <em>delimiter=&lt;class 'DEFAULT_TARGET_DELIM'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.traverse_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the fact to traverse dicts with &#8216;.&#8217; as it was an old
default and makina-states relies a lot on it</p>
<p>This restore the old behavior of something that can be traversed</p>
<dl class="docutils">
<dt>makina-states.foo:</dt>
<dd><dl class="first last docutils">
<dt>bar:</dt>
<dd>c: true</dd>
</dl>
</dd>
</dl>
<p>can be traversed with makina-states.foo.bar.c</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.uncached_get">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">uncached_get</code><span class="sig-paren">(</span><em>key</em>, <em>default=''</em>, <em>local_registry=None</em>, <em>registry_format='pack'</em>, <em>delimiter=&lt;class 'DEFAULT_TARGET_DELIM'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.uncached_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as &#8216;config.get&#8217; but with different retrieval order.</p>
<p>This routine traverses these data stores in this order:</p>
<blockquote>
<div><ul class="simple">
<li>Local minion config (opts)</li>
<li>Minion&#8217;s pillar</li>
<li><dl class="first docutils">
<dt>Dict:</dt>
<dd><ul class="first last">
<li>passed in local_registry argument</li>
<li>or automaticly loaded global registries</li>
</ul>
</dd>
</dl>
</li>
<li>Minion&#8217;s grains</li>
<li>Master config</li>
</ul>
</div></blockquote>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>salt <span class="s1">&#39;*&#39;</span> mc_utils.get pkg:apache
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.unix_crypt">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">unix_crypt</code><span class="sig-paren">(</span><em>passwd</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.unix_crypt" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt the stringed password in the unix crypt format (/etc/shadow)</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.update_no_list">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">update_no_list</code><span class="sig-paren">(</span><em>dest</em>, <em>upd</em>, <em>recursive_update=True</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.update_no_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursive version of the default dict.update</p>
<p>Merges upd recursively into dest
But instead of merging lists, it overrides them from target dict</p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.yaml_dump">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">yaml_dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.yaml_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.old_yaml_dump()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.yaml_load">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">yaml_load</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.yaml_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.yaml_load()</span></code></p>
</dd></dl>

<dl class="function">
<dt id="mc_states.modules.mc_utils.yencode">
<code class="descclassname">mc_states.modules.mc_utils.</code><code class="descname">yencode</code><span class="sig-paren">(</span><em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#mc_states.modules.mc_utils.yencode" title="Permalink to this definition">¶</a></dt>
<dd><p>Retro compat to <code class="xref py py-meth docutils literal"><span class="pre">mc_states.modules.mc_dump.yencode()</span></code></p>
</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../states/index.html" class="btn btn-neutral float-right" title="States modules">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mc_macros.html" class="btn btn-neutral" title="mc_macros / macros helpers"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 -&gt; 2017, Mathieu Le Marec Pasquet, Régis Leroy &amp; Makina Corpus folks.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>