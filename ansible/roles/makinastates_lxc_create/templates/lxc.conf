lxc.include = /usr/share/lxc/config/ubuntu.common.conf
{% if lxc_backing_store == 'dir' %}
lxc.rootfs = {{lxc_path}}/{{lxc_container_name}}/rootfs
{% elif lxc_backing_store == 'overlayfs' %}
lxc.rootfs = overlayfs:{{makinastates_lxc_clone_lxc_rootfs.stdout}}:{{lxc_path}}/{{lxc_container_name}}/delta0
{% endif %}
{% if lxc_backing_store in ['overlayfs', 'dir'] %}
lxc.rootfs.backend = {{lxc_backing_store}}
{% endif %}
lxc.mount = {{lxc_path}}/{{lxc_container_name}}/fstab
lxc.utsname = {{lxc_container_name}}
lxc.arch = amd64
lxc.start.auto = {{lxc_auto_start}}
lxc.network.type = veth
lxc.network.name = eth0
lxc.network.flags = up
{{(lxc_eth0_bridge)|ternary('lxc.network.link = {0}'.format(lxc_eth0_bridge), '#')}}
{{(lxc_eth0_gateway)|ternary('lxc.network.gateway = {0}'.format(lxc_eth0_gateway), '#')}}
{{(lxc_eth0_mac)|ternary('lxc.network.hwaddr = {0}'.format(lxc_eth0_mac), '#')}}
{{(lxc_eth1_mac or lxc_eth1_ip or lxc_eth1_bridge)|ternary('lxc.network.name = eth1', '#')}}
{{(lxc_eth1_mac or lxc_eth1_ip or lxc_eth1_bridge)|ternary('lxc.network.flags = up', '#')}}
{{(lxc_eth1_bridge)|ternary('lxc.network.link = {0}'.format(lxc_eth1_bridge), '#')}}
{{(lxc_eth1_mac)|ternary('lxc.network.hwaddr = {0}'.format(lxc_eth1_mac), '#')}}
{{(lxc_eth1_ip)|ternary('lxc.network.ipv4 = {0}'.format(lxc_eth1_ip), '#')}}
{{((lxc_eth1_mac or lxc_eth1_ip or lxc_eth1_bridge) and lxc_eth1_gateway)|ternary('lxc.network.gateway = {0}'.format(lxc_eth1_gateway), '#')}}
